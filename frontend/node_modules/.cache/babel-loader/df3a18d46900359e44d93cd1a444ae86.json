{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\FullStack QuickBuy\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\FullStack QuickBuy\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"E:\\\\FullStack QuickBuy\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\FullStack QuickBuy\\\\frontend\\\\src\\\\Components\\\\MainContent\\\\ProductEditScreen\\\\ProductEditScreen.js\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { detailsListOFFullProduct, detailsProduct, updateProduct } from \"../../../Actions/ProductActions\";\nimport LoadingBox from \"../../LoadingBox\";\nimport MessageBox from \"../../MessageBox\";\nimport { PRODUCT_UPDATE_RESET } from \"../../../Constants/ProductConstants.js\";\nimport Axios from \"../../../../node_modules/axios/index\";\nexport default function ProductEditScreen(props) {\n  var productId = props.match.params.id;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      productType = _useState2[0],\n      setProductType = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      name = _useState4[0],\n      setName = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      price = _useState6[0],\n      setPrice = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      image = _useState8[0],\n      setImage = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      category = _useState10[0],\n      setCategory = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      countInStock = _useState12[0],\n      setCountInStock = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      brand = _useState14[0],\n      setBrand = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      description = _useState16[0],\n      setDescription = _useState16[1];\n\n  var productDetails = useSelector(function (state) {\n    return state.productDetails;\n  });\n  var loading = productDetails.loading,\n      error = productDetails.error,\n      product = productDetails.product;\n  var productUpdate = useSelector(function (state) {\n    return state.productUpdate;\n  });\n  var loadingUpdate = productUpdate.loading,\n      errorUpdate = productUpdate.error,\n      successUpdate = productUpdate.success;\n  var dispatch = useDispatch();\n  useEffect(function () {\n    if (successUpdate) {\n      props.history.push(\"/productlist\");\n    }\n\n    if (!product || product._id !== productId || successUpdate) {\n      dispatch({\n        type: PRODUCT_UPDATE_RESET\n      });\n      dispatch(detailsListOFFullProduct(productId));\n    } else {\n      setProductType(product.productType);\n      setName(product.name);\n      setPrice(product.price);\n      setImage(product.image);\n      setCategory(product.category);\n      setCountInStock(product.countInStock);\n      setBrand(product.brand);\n      setDescription(product.description);\n    }\n  }, [product, dispatch, productId]);\n\n  var submitHandler = function submitHandler(e) {\n    e.preventDefault(); // TODO: dispatch update product\n\n    dispatch(updateProduct({\n      _id: productId,\n      productType: productType,\n      name: name,\n      price: price,\n      image: image,\n      category: category,\n      brand: brand,\n      countInStock: countInStock,\n      description: description\n    }));\n  };\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      loadingUpload = _useState18[0],\n      setLoadingUpload = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      errorUpload = _useState20[0],\n      setErrorUpload = _useState20[1];\n\n  var userSignin = useSelector(function (state) {\n    return state.userSignin;\n  });\n  var userInfo = userSignin.userInfo;\n\n  var uploadFileHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var file, bodyFormData, _yield$Axios$post, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              file = e.target.files[0];\n              bodyFormData = new FormData();\n              bodyFormData.append(\"image\", file);\n              setLoadingUpload(true);\n              _context.prev = 4;\n              _context.next = 7;\n              return Axios.post(\"/uploads\", bodyFormData, {\n                headers: {\n                  \"Content-Type\": \"multipart/form-data\",\n                  Authorization: \"Bearer \".concat(userInfo.token)\n                }\n              });\n\n            case 7:\n              _yield$Axios$post = _context.sent;\n              data = _yield$Axios$post.data;\n              setImage(data);\n              setLoadingUpload(false);\n              _context.next = 17;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](4);\n              setErrorUpload(_context.t0.message);\n              setLoadingUpload(false);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 13]]);\n    }));\n\n    return function uploadFileHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form\",\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, \"Edit Product \", productId)), loadingUpdate && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 27\n    }\n  }), errorUpdate && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, errorUpdate), loading ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }) : error ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, error) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"productType\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }, \"Product Type\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"productType\",\n    type: \"text\",\n    placeholder: \"Enter productType\",\n    value: productType,\n    onChange: function onChange(e) {\n      return setProductType(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    type: \"text\",\n    placeholder: \"Enter name\",\n    value: name,\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"pri\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"pri\",\n    type: \"text\",\n    placeholder: \"Enter your price\",\n    value: price,\n    onChange: function onChange(e) {\n      return setPrice(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, \"Image\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"image\",\n    type: \"text\",\n    placeholder: \"Enter image\",\n    value: image,\n    onChange: function onChange(e) {\n      return setImage(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"imageFile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, \"Image File\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"imageFile\",\n    label: \"Choose Image\",\n    onChange: uploadFileHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 15\n    }\n  }), loadingUpload && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 33\n    }\n  }), errorUpload && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, errorUpload)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"category\",\n    type: \"text\",\n    placeholder: \"Enter category\",\n    value: category,\n    onChange: function onChange(e) {\n      return setCategory(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"brand\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, \"Brand\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"brand\",\n    type: \"text\",\n    placeholder: \"Enter brand\",\n    value: brand,\n    onChange: function onChange(e) {\n      return setBrand(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"countInStock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }, \"Count In Stock\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"countInStock\",\n    type: \"text\",\n    placeholder: \"Enter countInStock\",\n    value: countInStock,\n    onChange: function onChange(e) {\n      return setCountInStock(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"description\",\n    rows: \"3\",\n    type: \"text\",\n    placeholder: \"Enter description\",\n    value: description,\n    onChange: function onChange(e) {\n      return setDescription(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"bts\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }, \"Update\")))));\n}","map":{"version":3,"sources":["E:/FullStack QuickBuy/frontend/src/Components/MainContent/ProductEditScreen/ProductEditScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","detailsListOFFullProduct","detailsProduct","updateProduct","LoadingBox","MessageBox","PRODUCT_UPDATE_RESET","Axios","ProductEditScreen","props","productId","match","params","id","productType","setProductType","name","setName","price","setPrice","image","setImage","category","setCategory","countInStock","setCountInStock","brand","setBrand","description","setDescription","productDetails","state","loading","error","product","productUpdate","loadingUpdate","errorUpdate","successUpdate","success","dispatch","history","push","_id","type","submitHandler","e","preventDefault","loadingUpload","setLoadingUpload","errorUpload","setErrorUpload","userSignin","userInfo","uploadFileHandler","file","target","files","bodyFormData","FormData","append","post","headers","Authorization","token","data","message","value"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { detailsListOFFullProduct, detailsProduct, updateProduct } from \"../../../Actions/ProductActions\";\r\nimport LoadingBox from \"../../LoadingBox\";\r\nimport MessageBox from \"../../MessageBox\";\r\nimport { PRODUCT_UPDATE_RESET } from \"../../../Constants/ProductConstants.js\";\r\nimport Axios from \"../../../../node_modules/axios/index\";\r\n\r\nexport default function ProductEditScreen(props) {\r\n  const productId = props.match.params.id;\r\n  const [productType, setProductType] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [countInStock, setCountInStock] = useState(\"\");\r\n  const [brand, setBrand] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n\r\n  const productDetails = useSelector((state) => state.productDetails);\r\n  const { loading, error, product } = productDetails;\r\n  const productUpdate = useSelector((state) => state.productUpdate);\r\n  const {\r\n    loading: loadingUpdate,\r\n    error: errorUpdate,\r\n    success: successUpdate,\r\n  } = productUpdate;\r\n\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (successUpdate) {\r\n      props.history.push(\"/productlist\");\r\n    }\r\n    if (!product || product._id !== productId || successUpdate) {\r\n      dispatch({ type: PRODUCT_UPDATE_RESET });\r\n      dispatch(detailsListOFFullProduct(productId));\r\n    } else {\r\n      setProductType(product.productType);\r\n      setName(product.name);\r\n      setPrice(product.price);\r\n      setImage(product.image);\r\n      setCategory(product.category);\r\n      setCountInStock(product.countInStock);\r\n      setBrand(product.brand);\r\n      setDescription(product.description);\r\n    }\r\n  }, [product, dispatch, productId]);\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    // TODO: dispatch update product\r\n    dispatch(\r\n      updateProduct({\r\n        _id: productId,\r\n        productType,\r\n        name,\r\n        price,\r\n        image,\r\n        category,\r\n        brand,\r\n        countInStock,\r\n        description,\r\n      })\r\n    );\r\n  };\r\n\r\n  const [loadingUpload, setLoadingUpload] = useState(false);\r\n  const [errorUpload, setErrorUpload] = useState(\"\");\r\n\r\n  const userSignin = useSelector((state) => state.userSignin);\r\n  const { userInfo } = userSignin;\r\n  const uploadFileHandler = async (e) => {\r\n    const file = e.target.files[0];\r\n    const bodyFormData = new FormData();\r\n    bodyFormData.append(\"image\", file);\r\n    setLoadingUpload(true);\r\n    try {\r\n      const { data } = await Axios.post(\"/uploads\", bodyFormData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n          Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n      });\r\n      setImage(data);\r\n      setLoadingUpload(false);\r\n    } catch (error) {\r\n      setErrorUpload(error.message);\r\n      setLoadingUpload(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form className=\"form\" onSubmit={submitHandler}>\r\n        <div>\r\n          <h1>Edit Product {productId}</h1>\r\n        </div>\r\n        {loadingUpdate && <LoadingBox></LoadingBox>}\r\n        {errorUpdate && <MessageBox variant=\"danger\">{errorUpdate}</MessageBox>}\r\n        {loading ? (\r\n          <LoadingBox></LoadingBox>\r\n        ) : error ? (\r\n          <MessageBox variant=\"danger\">{error}</MessageBox>\r\n        ) : (\r\n          <>\r\n            <div>\r\n              <label htmlFor=\"productType\">Product Type</label>\r\n              <input\r\n                id=\"productType\"\r\n                type=\"text\"\r\n                placeholder=\"Enter productType\"\r\n                value={productType}\r\n                onChange={(e) => setProductType(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"name\">Name</label>\r\n              <input\r\n                id=\"name\"\r\n                type=\"text\"\r\n                placeholder=\"Enter name\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"pri\">Price</label>\r\n              <input\r\n                id=\"pri\"\r\n                type=\"text\"\r\n                placeholder=\"Enter your price\"\r\n                value={price}\r\n                onChange={(e) => setPrice(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"image\">Image</label>\r\n              <input\r\n                id=\"image\"\r\n                type=\"text\"\r\n                placeholder=\"Enter image\"\r\n                value={image}\r\n                onChange={(e) => setImage(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"imageFile\">Image File</label>\r\n              <input\r\n                type=\"file\"\r\n                id=\"imageFile\"\r\n                label=\"Choose Image\"\r\n                onChange={uploadFileHandler}\r\n              ></input>\r\n              {loadingUpload && <LoadingBox></LoadingBox>}\r\n              {errorUpload && (\r\n                <MessageBox variant=\"danger\">{errorUpload}</MessageBox>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"category\">Category</label>\r\n              <input\r\n                id=\"category\"\r\n                type=\"text\"\r\n                placeholder=\"Enter category\"\r\n                value={category}\r\n                onChange={(e) => setCategory(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"brand\">Brand</label>\r\n              <input\r\n                id=\"brand\"\r\n                type=\"text\"\r\n                placeholder=\"Enter brand\"\r\n                value={brand}\r\n                onChange={(e) => setBrand(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"countInStock\">Count In Stock</label>\r\n              <input\r\n                id=\"countInStock\"\r\n                type=\"text\"\r\n                placeholder=\"Enter countInStock\"\r\n                value={countInStock}\r\n                onChange={(e) => setCountInStock(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"description\">Description</label>\r\n              <textarea\r\n                id=\"description\"\r\n                rows=\"3\"\r\n                type=\"text\"\r\n                placeholder=\"Enter description\"\r\n                value={description}\r\n                onChange={(e) => setDescription(e.target.value)}\r\n              ></textarea>\r\n            </div>\r\n            <div>\r\n              <label></label>\r\n              <button className=\"bts\" type=\"submit\">\r\n                Update\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}