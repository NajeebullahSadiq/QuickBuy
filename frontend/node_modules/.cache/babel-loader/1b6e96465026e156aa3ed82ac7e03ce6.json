{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\FullStack QuickBuy\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\FullStack QuickBuy\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport Axios from \"axios\";\nimport { CART_EMPTY } from \"../Constants/CartConstants\";\nimport { ORDER_CREATE_FAIL, ORDER_CREATE_REQUEST, ORDER_CREATE_SUCCESS, ORDER_DETAILS_REQUEST, ORDER_DETAILS_SUCCESS, ORDER_DETAILS_FAIL } from \"../Constants/orderConstants\";\nexport var createOrder = function createOrder(order) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch, getState) {\n      var _getState, userInfo, _yield$Axios$post, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch({\n                type: ORDER_CREATE_REQUEST,\n                payload: order\n              });\n              _context.prev = 1;\n              _getState = getState(), userInfo = _getState.userSignin.userInfo;\n              _context.next = 5;\n              return Axios.post(\"/orders\", order, {\n                headers: {\n                  Authorization: \"Bearer \".concat(userInfo.token)\n                }\n              });\n\n            case 5:\n              _yield$Axios$post = _context.sent;\n              data = _yield$Axios$post.data;\n              dispatch({\n                type: ORDER_CREATE_SUCCESS,\n                payload: data.order\n              });\n              dispatch({\n                type: CART_EMPTY\n              });\n              localStorage.removeItem(\"cartItems\");\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](1);\n              dispatch({\n                type: ORDER_CREATE_FAIL,\n                payload: _context.t0.response && _context.t0.response.data.message ? _context.t0.response.data.message : _context.t0.message\n              });\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 12]]);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var detailsOrder = function detailsOrder(orderId) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n      var _getState2, userInfo, _yield$Axios$get, data, message;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              dispatch({\n                type: ORDER_DETAILS_REQUEST,\n                payload: orderId\n              });\n              _getState2 = getState(), userInfo = _getState2.userSignin.userInfo;\n              _context2.prev = 2;\n              _context2.next = 5;\n              return Axios.get(\"/orders/\".concat(orderId), {\n                headers: {\n                  Authorization: \"Bearer \".concat(userInfo.token)\n                }\n              });\n\n            case 5:\n              _yield$Axios$get = _context2.sent;\n              data = _yield$Axios$get.data;\n              dispatch({\n                type: ORDER_DETAILS_SUCCESS,\n                payload: data\n              });\n              _context2.next = 14;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](2);\n              message = _context2.t0.response && _context2.t0.response.data.message ? _context2.t0.response.data.message : _context2.t0.message;\n              dispatch({\n                type: ORDER_DETAILS_FAIL,\n                payload: message\n              });\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 10]]);\n    }));\n\n    return function (_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var payOrder = function payOrder(order, paymentResult) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch, getState) {\n      var _getState3, userInfo, _Axios$put, data, message;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              dispatch({\n                type: ORDER_PAY_REQUEST,\n                payload: {\n                  order: order,\n                  paymentResult: paymentResult\n                }\n              });\n              _getState3 = getState(), userInfo = _getState3.userSignin.userInfo;\n\n              try {\n                _Axios$put = Axios.put(\"/api/orders/\".concat(order._id, \"/pay\"), paymentResult, {\n                  headers: {\n                    Authorization: \"Bearer \".concat(userInfo.token)\n                  }\n                }), data = _Axios$put.data;\n                dispatch({\n                  type: ORDER_PAY_SUCCESS,\n                  payload: data\n                });\n              } catch (error) {\n                message = error.response && error.response.data.message ? error.response.data.message : error.message;\n                dispatch({\n                  type: ORDER_PAY_FAIL,\n                  payload: message\n                });\n              }\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x5, _x6) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"sources":["E:/FullStack QuickBuy/frontend/src/Actions/orderActions.js"],"names":["Axios","CART_EMPTY","ORDER_CREATE_FAIL","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_DETAILS_FAIL","createOrder","order","dispatch","getState","type","payload","userInfo","userSignin","post","headers","Authorization","token","data","localStorage","removeItem","response","message","detailsOrder","orderId","get","payOrder","paymentResult","ORDER_PAY_REQUEST","put","_id","ORDER_PAY_SUCCESS","error","ORDER_PAY_FAIL"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,4BAA3B;AACA,SACEC,iBADF,EAEEC,oBAFF,EAGEC,oBAHF,EAIEC,qBAJF,EAKEC,qBALF,EAMEC,kBANF,QAOO,6BAPP;AASA,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD;AAAA;AAAA,wEAAW,iBAAOC,QAAP,EAAiBC,QAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACpCD,cAAAA,QAAQ,CAAC;AAAEE,gBAAAA,IAAI,EAAET,oBAAR;AAA8BU,gBAAAA,OAAO,EAAEJ;AAAvC,eAAD,CAAR;AADoC;AAAA,0BAK9BE,QAAQ,EALsB,EAIlBG,QAJkB,aAIhCC,UAJgC,CAIlBD,QAJkB;AAAA;AAAA,qBAMXd,KAAK,CAACgB,IAAN,CAAW,SAAX,EAAsBP,KAAtB,EAA6B;AAClDQ,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,mBAAYJ,QAAQ,CAACK,KAArB;AADN;AADyC,eAA7B,CANW;;AAAA;AAAA;AAM1BC,cAAAA,IAN0B,qBAM1BA,IAN0B;AAWlCV,cAAAA,QAAQ,CAAC;AAAEE,gBAAAA,IAAI,EAAER,oBAAR;AAA8BS,gBAAAA,OAAO,EAAEO,IAAI,CAACX;AAA5C,eAAD,CAAR;AACAC,cAAAA,QAAQ,CAAC;AAAEE,gBAAAA,IAAI,EAAEX;AAAR,eAAD,CAAR;AACAoB,cAAAA,YAAY,CAACC,UAAb,CAAwB,WAAxB;AAbkC;AAAA;;AAAA;AAAA;AAAA;AAelCZ,cAAAA,QAAQ,CAAC;AACPE,gBAAAA,IAAI,EAAEV,iBADC;AAEPW,gBAAAA,OAAO,EACL,YAAMU,QAAN,IAAkB,YAAMA,QAAN,CAAeH,IAAf,CAAoBI,OAAtC,GACI,YAAMD,QAAN,CAAeH,IAAf,CAAoBI,OADxB,GAEI,YAAMA;AALL,eAAD,CAAR;;AAfkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAX;;AAAA;AAAA;AAAA;AAAA;AAAA,CAApB;AAyBP,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,OAAD;AAAA;AAAA,yEAAa,kBAAOhB,QAAP,EAAiBC,QAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACvCD,cAAAA,QAAQ,CAAC;AAAEE,gBAAAA,IAAI,EAAEP,qBAAR;AAA+BQ,gBAAAA,OAAO,EAAEa;AAAxC,eAAD,CAAR;AADuC,2BAInCf,QAAQ,EAJ2B,EAGvBG,QAHuB,cAGrCC,UAHqC,CAGvBD,QAHuB;AAAA;AAAA;AAAA,qBAMdd,KAAK,CAAC2B,GAAN,mBAAqBD,OAArB,GAAgC;AACrDT,gBAAAA,OAAO,EAAE;AAAEC,kBAAAA,aAAa,mBAAYJ,QAAQ,CAACK,KAArB;AAAf;AAD4C,eAAhC,CANc;;AAAA;AAAA;AAM7BC,cAAAA,IAN6B,oBAM7BA,IAN6B;AASrCV,cAAAA,QAAQ,CAAC;AAAEE,gBAAAA,IAAI,EAAEN,qBAAR;AAA+BO,gBAAAA,OAAO,EAAEO;AAAxC,eAAD,CAAR;AATqC;AAAA;;AAAA;AAAA;AAAA;AAW/BI,cAAAA,OAX+B,GAYnC,aAAMD,QAAN,IAAkB,aAAMA,QAAN,CAAeH,IAAf,CAAoBI,OAAtC,GACI,aAAMD,QAAN,CAAeH,IAAf,CAAoBI,OADxB,GAEI,aAAMA,OAdyB;AAerCd,cAAAA,QAAQ,CAAC;AAAEE,gBAAAA,IAAI,EAAEL,kBAAR;AAA4BM,gBAAAA,OAAO,EAAEW;AAArC,eAAD,CAAR;;AAfqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAb;;AAAA;AAAA;AAAA;AAAA;AAAA,CAArB;AAmBP,OAAO,IAAMI,QAAQ,GACnB,SADWA,QACX,CAACnB,KAAD,EAAQoB,aAAR;AAAA;AAAA,yEAA0B,kBAAOnB,QAAP,EAAiBC,QAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACxBD,cAAAA,QAAQ,CAAC;AAAEE,gBAAAA,IAAI,EAAEkB,iBAAR;AAA2BjB,gBAAAA,OAAO,EAAE;AAAEJ,kBAAAA,KAAK,EAALA,KAAF;AAASoB,kBAAAA,aAAa,EAAbA;AAAT;AAApC,eAAD,CAAR;AADwB,2BAIpBlB,QAAQ,EAJY,EAGRG,QAHQ,cAGtBC,UAHsB,CAGRD,QAHQ;;AAKxB,kBAAI;AAAA,6BACed,KAAK,CAAC+B,GAAN,uBACAtB,KAAK,CAACuB,GADN,WAEfH,aAFe,EAGf;AACEZ,kBAAAA,OAAO,EAAE;AAAEC,oBAAAA,aAAa,mBAAYJ,QAAQ,CAACK,KAArB;AAAf;AADX,iBAHe,CADf,EACMC,IADN,cACMA,IADN;AAQFV,gBAAAA,QAAQ,CAAC;AAAEE,kBAAAA,IAAI,EAAEqB,iBAAR;AAA2BpB,kBAAAA,OAAO,EAAEO;AAApC,iBAAD,CAAR;AACD,eATD,CASE,OAAOc,KAAP,EAAc;AACRV,gBAAAA,OADQ,GAEZU,KAAK,CAACX,QAAN,IAAkBW,KAAK,CAACX,QAAN,CAAeH,IAAf,CAAoBI,OAAtC,GACIU,KAAK,CAACX,QAAN,CAAeH,IAAf,CAAoBI,OADxB,GAEIU,KAAK,CAACV,OAJE;AAKdd,gBAAAA,QAAQ,CAAC;AAAEE,kBAAAA,IAAI,EAAEuB,cAAR;AAAwBtB,kBAAAA,OAAO,EAAEW;AAAjC,iBAAD,CAAR;AACD;;AApBuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA1B;;AAAA;AAAA;AAAA;AAAA;AAAA,CADK","sourcesContent":["import Axios from \"axios\";\r\nimport { CART_EMPTY } from \"../Constants/CartConstants\";\r\nimport {\r\n  ORDER_CREATE_FAIL,\r\n  ORDER_CREATE_REQUEST,\r\n  ORDER_CREATE_SUCCESS,\r\n  ORDER_DETAILS_REQUEST,\r\n  ORDER_DETAILS_SUCCESS,\r\n  ORDER_DETAILS_FAIL,\r\n} from \"../Constants/orderConstants\";\r\n\r\nexport const createOrder = (order) => async (dispatch, getState) => {\r\n  dispatch({ type: ORDER_CREATE_REQUEST, payload: order });\r\n  try {\r\n    const {\r\n      userSignin: { userInfo },\r\n    } = getState();\r\n    const { data } = await Axios.post(\"/orders\", order, {\r\n      headers: {\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    });\r\n    dispatch({ type: ORDER_CREATE_SUCCESS, payload: data.order });\r\n    dispatch({ type: CART_EMPTY });\r\n    localStorage.removeItem(\"cartItems\");\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ORDER_CREATE_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const detailsOrder = (orderId) => async (dispatch, getState) => {\r\n  dispatch({ type: ORDER_DETAILS_REQUEST, payload: orderId });\r\n  const {\r\n    userSignin: { userInfo },\r\n  } = getState();\r\n  try {\r\n    const { data } = await Axios.get(`/orders/${orderId}`, {\r\n      headers: { Authorization: `Bearer ${userInfo.token}` },\r\n    });\r\n    dispatch({ type: ORDER_DETAILS_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    const message =\r\n      error.response && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message;\r\n    dispatch({ type: ORDER_DETAILS_FAIL, payload: message });\r\n  }\r\n};\r\n\r\nexport const payOrder =\r\n  (order, paymentResult) => async (dispatch, getState) => {\r\n    dispatch({ type: ORDER_PAY_REQUEST, payload: { order, paymentResult } });\r\n    const {\r\n      userSignin: { userInfo },\r\n    } = getState();\r\n    try {\r\n      const { data } = Axios.put(\r\n        `/api/orders/${order._id}/pay`,\r\n        paymentResult,\r\n        {\r\n          headers: { Authorization: `Bearer ${userInfo.token}` },\r\n        }\r\n      );\r\n      dispatch({ type: ORDER_PAY_SUCCESS, payload: data });\r\n    } catch (error) {\r\n      const message =\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message;\r\n      dispatch({ type: ORDER_PAY_FAIL, payload: message });\r\n    }\r\n  };"]},"metadata":{},"sourceType":"module"}